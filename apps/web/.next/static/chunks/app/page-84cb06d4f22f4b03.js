(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3346:(e,t,r)=>{Promise.resolve().then(r.bind(r,9303))},9303:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var n=r(4568),a=r(7620),s=r(3916);let i=s.Ik({runId:s.Yj().min(1),suiteName:s.Yj().min(1),server:s.Yj().min(1),model:s.Yj().min(1),startedAt:s.Yj().min(1),finishedAt:s.Yj().min(1),summary:s.Ik({passed:s.ai(),failed:s.ai(),score:s.ai(),deterministicScore:s.ai(),epistemicScore:s.ai()}),cases:s.YO(s.Ik({id:s.Yj(),title:s.Yj(),category:s.k5(["deterministic","epistemic","safety"]),passed:s.zM(),deterministicScore:s.ai(),epistemicScore:s.ai(),notes:s.YO(s.Yj())}))});s.Ik({team:s.Yj().min(1).default("default"),submittedBy:s.Yj().min(1).default("unknown"),report:i});var o=r(7011);let l="arduino-mcp-eval-runs-v1";function c(e){return[...e].sort((e,t)=>t.createdAt.localeCompare(e.createdAt))}class d{get storage(){return window.localStorage}async listRuns(){return c(function(e){if(!e)return[];try{let t=JSON.parse(e);if(!Array.isArray(t))return[];return t}catch(e){return[]}}(this.storage.getItem(l)))}async addRun(e){let t=await this.listRuns(),r={id:"".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,8)),team:e.team,submittedBy:e.submittedBy,createdAt:new Date().toISOString(),report:e.report},n=c([r,...t]);return this.storage.setItem(l,JSON.stringify(n)),r}async replaceAll(e){this.storage.setItem(l,JSON.stringify(c(e)))}async exportPayload(){return{schemaVersion:"0.1.0",runs:await this.listRuns()}}async importPayload(e){let t=this.normalizeImportPayload(e);return await this.replaceAll(t),t}normalizeImportPayload(e){if(Array.isArray(e))return c(e);if("object"==typeof e&&null!==e){if(Array.isArray(e.runs))return c(e.runs);if("string"==typeof e.runId){let t=i.parse(e);return[{id:"".concat(Date.now(),"_").concat(Math.random().toString(36).slice(2,8)),team:"imported",submittedBy:"import",createdAt:new Date().toISOString(),report:t}]}}throw Error("Unsupported JSON format. Use exported dashboard JSON or a run-report JSON object.")}}class u{async listRuns(){throw Error("Database repository stub: implement listRuns() when DB is configured.")}async addRun(e){throw Error("Database repository stub: implement addRun() when DB is configured.")}async replaceAll(e){throw Error("Database repository stub: implement replaceAll() when DB is configured.")}async exportPayload(){throw Error("Database repository stub: implement exportPayload() when DB is configured.")}async importPayload(e){throw Error("Database repository stub: implement importPayload() when DB is configured.")}constructor(e){this.connectionString=e,this.connectionString}}let h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local";return"database"===e?new u(o.env.NEXT_PUBLIC_DATABASE_URL):new d}("local");function m(){let[e,t]=(0,a.useState)([]),[r,s]=(0,a.useState)(!1),[i,o]=(0,a.useState)(""),l=(0,a.useMemo)(()=>{let t=e.length,r=0===t?0:e.reduce((e,t)=>e+t.report.summary.score,0)/t;return{count:t,avgScore:r}},[e]);async function c(){t(await h.listRuns())}async function d(){s(!0),o("");try{let e=await h.exportPayload(),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download="arduino-mcp-runs-".concat(new Date().toISOString().slice(0,19),".json"),n.click(),URL.revokeObjectURL(r),o("JSON export downloaded.")}catch(e){o(e.message)}finally{s(!1)}}async function u(e){var r;let n=null==(r=e.target.files)?void 0:r[0];if(n){s(!0),o("");try{let e=await n.text(),r=JSON.parse(e),a=await h.importPayload(r);t(a),o("Imported ".concat(a.length," run(s) from JSON."))}catch(e){o(e.message)}finally{e.target.value="",s(!1)}}}return(0,a.useEffect)(()=>{c()},[]),(0,n.jsxs)("main",{children:[(0,n.jsx)("h1",{children:"Arduino MCP Eval Runs"}),(0,n.jsx)("p",{children:"Local mode stores runs in browser localStorage with JSON import/export for sharing."}),(0,n.jsxs)("div",{className:"toolbar",children:[(0,n.jsx)("button",{type:"button",onClick:()=>void c(),disabled:r,children:"Refresh"}),(0,n.jsx)("button",{type:"button",onClick:()=>void d(),disabled:r||0===e.length,children:"Download JSON"}),(0,n.jsxs)("label",{className:"upload-label",children:["Upload JSON",(0,n.jsx)("input",{type:"file",accept:"application/json",onChange:e=>void u(e),disabled:r})]})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Runs:"})," ",l.count," \xa0|\xa0 ",(0,n.jsx)("strong",{children:"Avg Score:"})," ",l.avgScore.toFixed(3)]}),i?(0,n.jsx)("p",{className:"message",children:i}):null,(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Created"}),(0,n.jsx)("th",{children:"Team"}),(0,n.jsx)("th",{children:"Submitted By"}),(0,n.jsx)("th",{children:"Run ID"}),(0,n.jsx)("th",{children:"Server"}),(0,n.jsx)("th",{children:"Model"}),(0,n.jsx)("th",{children:"Score"})]})}),(0,n.jsx)("tbody",{children:0===e.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:7,children:"No runs in local storage yet. Upload JSON or ingest into this browser session."})}):e.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:new Date(e.createdAt).toLocaleString()}),(0,n.jsx)("td",{children:e.team}),(0,n.jsx)("td",{children:e.submittedBy}),(0,n.jsx)("td",{className:"code",children:e.report.runId}),(0,n.jsx)("td",{children:e.report.server}),(0,n.jsx)("td",{children:e.report.model}),(0,n.jsx)("td",{children:e.report.summary.score.toFixed(3)})]},e.id))})]})]})}}},e=>{e.O(0,[916,587,18,358],()=>e(e.s=3346)),_N_E=e.O()}]);